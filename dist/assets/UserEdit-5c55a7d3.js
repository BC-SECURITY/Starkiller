import{b as i}from"./ErrorStateAlert-1a7de5b6.js";import{_ as n}from"./EditPageTop-0bd95e24.js";import{as as l,u as d,az as u,aA as m,aB as c,n as f,c as p,A as h,q as t}from"./index-10311458.js";import{_ as o}from"./VSwitch-71bb7c40.js";import"./TooltipButton-4dcca8d6.js";import"./VTooltip-564982d7.js";const _={name:"UserEdit",components:{ErrorStateAlert:i,EditPageTop:n},data(){return{form:{username:"",password:"",confirm_password:"",is_admin:!1},rules:{name:[s=>!!s||"Name is required",s=>!!s&&s.length>3||"Name must be larger than 3 characters"],password:[s=>!!s||"Password is required",s=>!!s&&s.length>5||"Password must be larger than 5 characters"],confirmPassword:[s=>!!s||"Confirmation is required",s=>s===this.form.password||"Password must match"]},user:{},valid:!0,loading:!1,showPassword:!1,showConfirm:!1,errorState:!1}},computed:{...l(d,["isAdmin"]),breads(){return[{text:"Users",disabled:!1,to:"/users",exact:!0},{text:this.breadcrumbName,disabled:!0,to:"/users-edit"}]},breadcrumbName(){return this.user.username?this.user.username:this.id?this.id:"New"},isNew(){return this.$route.name==="userNew"},id(){return this.$route.params.id}},mounted(){this.isNew||this.getUser(this.id)},methods:{submit(){this.loading||!this.$refs.form.validate()||(this.loading=!0,this.id>0?u(this.form).then(()=>{this.$snack.success("User updated"),this.loading=!1}).catch(s=>{this.$snack.error(`Error: ${s}`),this.loading=!1}):m(this.form).then(({id:s})=>{this.$snack.success("User created"),this.loading=!1,this.$router.push({name:"userEdit",params:{id:s}})}).catch(s=>{this.$snack.error(`Error: ${s}`),this.loading=!1}))},getUser(s){c(s).then(e=>{this.user=e,this.form=e}).catch(()=>{this.errorState=!0})}}};var w=function(){var e=this,a=e._self._c;return a("div",[a(n,{attrs:{breads:e.breads,"show-submit":!0,"show-copy":!1,"show-delete":!1,"submit-loading":e.loading},on:{submit:e.submit}}),a("h3",[e._v(e._s(e.id?"Edit":"New")+" User")]),e.errorState?a(i,{attrs:{"resource-id":e.id,"resource-type":"user"}}):a(p,{staticStyle:{padding:"10px"}},[a(h,{ref:"form",staticStyle:{"max-width":"500px"},nativeOn:{submit:function(r){return r.preventDefault(),e.submit.apply(null,arguments)}},model:{value:e.valid,callback:function(r){e.valid=r},expression:"valid"}},[a(t,{attrs:{rules:e.rules.name,label:"Username",outlined:"",dense:"",required:"",disabled:!e.isNew},model:{value:e.form.username,callback:function(r){e.$set(e.form,"username",r)},expression:"form.username"}}),e.isNew?a(t,{attrs:{type:e.showPassword?"text":"password","append-icon":e.showPassword?"fa-eye":"fa-eye-slash",rules:e.rules.password,label:"Password",autocomplete:"off",outlined:"",dense:"",required:""},on:{"click:append":function(r){e.showPassword=!e.showPassword}},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}}):e._e(),e.isNew?a(t,{attrs:{type:e.showConfirm?"text":"password","append-icon":e.showConfirm?"fa-eye":"fa-eye-slash",rules:e.rules.confirmPassword,label:"Confirm Password",autocomplete:"off",outlined:"",dense:"",required:""},on:{"click:append":function(r){e.showConfirm=!e.showConfirm}},model:{value:e.form.confirm_password,callback:function(r){e.$set(e.form,"confirm_password",r)},expression:"form.confirm_password"}}):e._e(),e.isAdmin?a(o,{attrs:{label:"Admin"},model:{value:e.form.is_admin,callback:function(r){e.$set(e.form,"is_admin",r)},expression:"form.is_admin"}}):e._e(),e.isNew?e._e():a(o,{attrs:{label:"Enabled"},model:{value:e.form.enabled,callback:function(r){e.$set(e.form,"enabled",r)},expression:"form.enabled"}})],1)],1)],1)},b=[],g=f(_,w,b,!1,null,null,null,null);const U=g.exports;export{U as default};
