import{_ as o}from"./ListPageTop-cc2f9777.js";import{ax as i,ay as u,u as _,az as d,n as l}from"./index-864379eb.js";import{h as m}from"./moment-fbc5633a.js";import{_ as c}from"./VDataTable-31c6301b.js";import{b as p}from"./VSelect-33db8437.js";import{_ as f}from"./VTooltip-507e816d.js";import{_ as h}from"./VSwitch-f4d7c7c8.js";import"./VItemGroup-162b843b.js";const b={name:"Users",components:{ListPageTop:o},data(){return{moment:m,breads:[{text:"Users",disabled:!0,href:"/users"}],headers:[{text:"Name",value:"username"},{text:"Is Admin",value:"is_admin"},{text:"Actions",value:"actions",sortable:!1}]}},computed:{userStore(){return i()},users(){return this.userStore.users},...u(_,["isAdmin"])},mounted(){this.getUsers()},methods:{create(){this.$router.push({name:"userNew"})},async disableUser(n){d(n).catch(e=>{this.$snack.error(`Error: ${e}`),n.enabled=!n.enabled})},getUsers(){this.userStore.getUsers()}}};var v=function(){var e=this,t=e._self._c;return t("div",[t(o,{attrs:{breads:e.breads,"show-create":e.isAdmin,"show-refresh":!0,"show-delete":!1},on:{create:e.create,refresh:e.getUsers}}),t(c,{attrs:{headers:e.headers,items:e.users,dense:""},scopedSlots:e._u([{key:"item.username",fn:function({item:s}){return[e.isAdmin?t("router-link",{staticStyle:{color:"inherit"},attrs:{to:{name:"userEdit",params:{id:s.id}}}},[e._v(" "+e._s(s.username)+" ")]):t("span",[e._v(e._s(s.username))])]}},{key:"item.is_admin",fn:function({item:s}){return[t(p,{attrs:{disabled:""},model:{value:s.is_admin,callback:function(r){e.$set(s,"is_admin",r)},expression:"item.is_admin"}})]}},{key:"item.actions",fn:function({item:s}){return[e.isAdmin?t(f,{attrs:{disabled:!s.admin,top:""},scopedSlots:e._u([{key:"activator",fn:function({on:r}){return[t("div",e._g({staticStyle:{"max-width":"120px"}},r),[t(h,e._g({attrs:{disabled:s.admin,label:"Enabled"},on:{change:function(a){return e.disableUser(s)}},model:{value:s.enabled,callback:function(a){e.$set(s,"enabled",a)},expression:"item.enabled"}},r))],1)]}}],null,!0)},[t("span",[e._v("Cannot disable admin user")])]):e._e()]}}])})],1)},g=[],x=l(b,v,g,!1,null,null,null,null);const z=x.exports;export{z as default};
